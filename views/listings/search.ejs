<%- include("../partials/header") %>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    var queryString = window.location.search;
    var urlParams = new URLSearchParams(queryString);
    var resultSearch = urlParams.get('search');
</script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">


<button class="my_bttn">
    <i class="fa fa-arrow-up"></i>
</button>

<div class="container-fluid search-bar-container">
    <div class="container">
        <div class="col-md-12">
            <div class="row" style="padding: 5px 0 5px;">
                <form action="/listings" method="GET" class="form-inline" style="font-family: 'Poppins', sans-serif;">
                    <div class="search-bar-result">
                        <div class="search-bar-result-input">
                            <i class="fas fa-map-marker-alt"></i>
                            <input type="text" class="form-control" name="search" placeholder="Search for Properties">
                        </div>
                        <button type="submit" class="btn btn-info d-flex justify-content-center align-items-center" style="padding: 7x 12px;" >Go</button>
                    </div>    
                </form>
            </div>
        </div>
    </div>
</div>

<div class="container">
    <div class="col-md-12">
        <div class="row">
            <div class="col-12 px-0">
                <nav aria-label="breadcrumb">
                  <ol class="breadcrumb mb-0">
                    <li class="breadcrumb-item"><a href="/">Home</a></li>
                    <li class="breadcrumb-item"><a href="/listings">Listings</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Properties for Sale</li>
                  </ol>
                </nav>
            </div>
        </div>
        <div class="row" style="padding-top: 20px; padding-bottom: 20px;">
            <div class="d-flex flex-column">
                <h3 id="search-result" style="font-size: 1.5em;"></h3>
                <p>Found: <%= listings.length%> results</p>
            </div>
        </div>
    </div>
    <div class="row col-md-12 p-0 m-0">
        <div class="col-md-4 p-0 m-0">
            <div class="form-card">
                <div class="form-card-container p-0">
                    <form class="d-flex flex-column" action="/listings" method="GET" id="filterForm">
                        <strong>Filter</strong>
                        <!-- Filter: Sort -->
                        <div class="search-dropdown-select">
                            <select name="sort" id="sort">
                                <option value="" disabled selected hidden>Sort by</option>
                                <option value="HighestPrice" <% if(data.sort == 'HighestPrice') {%> selected <%} %>>Highest Price</option>
                                <option value="LowestPrice" <% if(data.sort == 'LowestPrice') {%> selected <%} %>>Lowest Price</option>
                                <option value="Recent" <% if(data.sort == 'Recent') {%> selected <%} %>>Recent</option>
                                <option value="Oldest" <% if(data.sort == 'Oldest') {%> selected <%} %>>Oldest</option>
                                <option value="MostPop" <% if(data.sort == 'MostPop') {%> selected <%} %>>Most Popular</option>
                                <option value="LeastPop" <% if(data.sort == 'LeastPop') {%> selected <%} %>>Least Popular</option>
                                <% if(currentUser && currentUser.isAdmin || currentUser && currentUser.isAgent && currentUser.agentStatus){ %>
                                <option value="Sold" <% if(data.sort == 'Sold') {%> selected <%} %>>Sold</option>
                                <option value="NotSold" <% if(data.sort == 'NotSold') {%> selected <%} %>>Not Sold</option>
                                <option value="Archive" <% if(data.sort == 'Archive') {%> selected <%} %>>Archive</option>
                                <option value="NotArchive" <% if(data.sort == 'NotArchive') {%> selected <%} %>>Not Archive</option>
                                <% } %>
                            </select>
                        </div>

                        <span class="seperateFilter" style="margin: 15px 0 15px;"></span>

                        <!-- Filter: Property Type-->
                        <div class="dropdownPType">
                            <div class="search-dropdown dropdownPType-content-onclick">
                                <div class="dropdown-label-wrap">
                                    <label class="dropdownPType-label">Property Type</label>
                                </div>
                                <i class="fas fa-caret-down"></i>    
                            </div>
                            <div class="dropdownPType-content hide-row-PType" id="dropdownPType-content">
                                <!-- <label for="propertyType">Choose a property type:</label><br> -->
                                <input type="checkbox" id="hdb" name="hdbType" value="hdb" <% if(data.hdbType) {%> checked <%} %>>
                                <label for="hdb">HDB</label><br>
                                <input type="checkbox" id="condo" name="condoType" value="condo"<% if(data.condoType) {%> checked <%} %>> 
                                <label for="condo">Condominium</label><br>
                                <input type="checkbox" id="landed" name="landedType" value="landed" <% if(data.landedType) {%> checked <%} %>>
                                <label for="landed">Landed Property</label><br>
                            </div>  
                        </div>

        
                        <!-- Filter: Property district -->
                        <div class="dropdownDistrict">
                            <div class="search-dropdown dropdownDistrict-content-onclick">
                                <div class="dropdown-label-wrap">
                                    <label class="dropdownDistrict-label">District</label>
                                </div>
                                <i class="fas fa-caret-down"></i>    
                            </div>
                            <div class="dropdownDistrict-content hide-row-District" id="dropdownDistrict-content">
                                <input type="checkbox" id="north" name="northDistrict" value="north" <% if(data.northDistrict) {%> checked <%} %>>
                                <label for="north">North</label><br>
                                <input type="checkbox" id="south" name="southDistrict" value="south" <% if(data.southDistrict) {%> checked <%} %>>
                                <label for="south">South</label><br>
                                <input type="checkbox" id="east" name="eastDistrict" value="east" <% if(data.eastDistrict) {%> checked <%} %>>
                                <label for="east">East</label><br>
                                <input type="checkbox" id="west" name="westDistrict" value="west" <% if(data.westDistrict) {%> checked <%} %>>
                                <label for="west">West</label><br>
                            </div>  
                        </div>
        
        
                        <!-- Filter: Number of rooms slider -->
                        <div class="dropdownBedroom">
                            <div class="search-dropdown dropdownBedroom-content-onclick">
                                <div class="dropdown-label-wrap">
                                    <label class="dropdownBedroom-label">Bedrooms</label>
                                </div>
                                <i class="fas fa-caret-down"></i>    
                            </div>
                            <div class="dropdownBedroom-content hide-row-Bedroom" id="dropdownBedroom-content">
                                <input type="checkbox" id="1" name="onerooms" value="1" <% if(data.onerooms) {%> checked <%} %>>
                                <label for="1">1 Bedroom</label><br>
                                <input type="checkbox" id="2" name="tworooms" value="2" <% if(data.tworooms) {%> checked <%} %>>
                                <label for="2">2 Bedrooms</label><br>
                                <input type="checkbox" id="3" name="threerooms" value="3" <% if(data.threerooms) {%> checked <%} %>>
                                <label for="3">3 Bedrooms</label><br>
                                <input type="checkbox" id="4" name="fourrooms" value="4" <% if(data.fourrooms) {%> checked <%} %>>
                                <label for="4">4 Bedrooms</label><br>
                                <input type="checkbox" id="5" name="fiverooms" value="5" <% if(data.fiverooms) {%> checked <%} %>>
                                <label for="5">5 Bedrooms</label><br>
                                <input type="checkbox" id="6" name="sixrooms" value="6" <% if(data.sixrooms) {%> checked <%} %>>
                                <label for="6">6 Bedrooms</label><br>
                            </div>  
                        </div>
        
        
                        <!-- Filter: Number of bathrooms -->
                        <div class="dropdownBathroom">
                            <div class="search-dropdown dropdownBathroom-content-onclick">
                                <div class="dropdown-label-wrap">
                                    <label class="dropdownBathroom-label">Bathrooms</label>
                                </div>
                                <i class="fas fa-caret-down"></i>    
                            </div>
                            <div class="dropdownBathroom-content hide-row-Bathroom" id="dropdownBathroom-content" >
                                <input type="checkbox" id="1bath" name="onebathrooms" value="1" <% if(data.onebathrooms) {%> checked <%} %>>
                                <label for="1bath">1 Bathroom</label><br>
                                <input type="checkbox" id="2bath" name="twobathrooms" value="2" <% if(data.twobathrooms) {%> checked <%} %>>
                                <label for="2bath">2 Bathroom</label><br>
                                <input type="checkbox" id="3bath" name="threebathrooms" value="3" <% if(data.threebathrooms) {%> checked <%} %>>
                                <label for="3bath">3 Bathroom</label><br>
                            </div>  
                        </div>
        
                        <!-- Filter: Tenure type -->
                        <div class="dropdownTenure">
                            <div class="search-dropdown dropdownTenure-content-onclick">
                                <div class="dropdown-label-wrap">
                                    <label class="dropdownTenure-label">Tenure</label>
                                </div>
                                <i class="fas fa-caret-down"></i>    
                            </div>
                            <div class="dropdownTenure-content hide-row-Tenure" id="dropdownTenure-content" >
                                <input type="checkbox" id="freehold" name="freehold" value="freehold" <% if(data.freehold) {%> checked <%} %>>
                                <label for="freehold">Freehold</label><br>
                                <input type="checkbox" id="NinetyNineYL" name="NinetyNineYL" value="ninetynine"<% if(data.NinetyNineYL) {%> checked <%} %>> 
                                <label for="NinetyNineYL">99-Year Leasehold</label><br>
                                <input type="checkbox" id="HundredThreeYL" name="HundredThreeYL" value="hundredthree" <% if(data.HundredThreeYL) {%> checked <%} %>>
                                <label for="HundredThreeYL">103-Year Leasehold</label><br>
                                <input type="checkbox" id="HundredTenYL" name="HundredTenYL" value="hundredten" <% if(data.HundredTenYL) {%> checked <%} %>>
                                <label for="HundredTenYL">110-Year Leasehold</label><br>
                                <input type="checkbox" id="NineHundredNineYL" name="ninehundrednine" value="999"<% if(data.NineHundredNineYL) {%> checked <%} %>> 
                                <label for="NineHundredNineYL">999-Year Leasehold</label><br>
                                <input type="checkbox" id="tenure" name="tenure" value="unknown" <% if(data.tenure) {%> checked <%} %>>
                                <label for="tenure">Unknown Tenure</label><br>
                            </div>  
                        </div>
        
                        <span class="seperateFilter" style="margin: 15px 0 15px;"></span>

                        <!-- Filter: Price Slider -->
                        <div class="price-slider">
                            <span>
                                Price: 
                                <input type="number" value="0" min="0" max="<%= largestPrice %>" name="minPrice" /> to
                                <input type="number" value="<%= largestPrice %>" min="0" max="<%= largestPrice %>" name="maxPrice" />
                            </span>
                            <input type="range" value="0" min="0" max="<%= largestPrice %>" step="500" />
                            <input type="range" value="<%= largestPrice %>" min="0" max="<%= largestPrice %>" step="500" />
                            <!-- <svg width="100%" height="24"> -->
                                <!-- <line x1="4" y1="0" x2="300" y2="0" stroke="#212121" stroke-width="12"
                                    stroke-dasharray="1 28">
                                </line> -->
                            <!-- </svg> -->
                        </div>
        
                        <span class="seperateFilter"></span>
        
                        <!-- Filter: Size Slider -->
                        <div class="size-slider">
                            <span>
                                Size: 
                                <input type="number" value="0" min="0" max="<%= largestSize %>" name="minSize" /> to
                                <input type="number" value="<%= largestSize %>" min="0" max="<%= largestSize %>" name="maxSize" />
                            </span>
                            <input type="range" value="0" min="0" max="<%= largestSize %>" step="500" />
                            <input type="range" value="<%= largestSize %>" min="0" max="<%= largestSize %>" step="500" />
                            <!-- <svg width="100%" height="24"> -->
                                <!-- <line x1="4" y1="0" x2="300" y2="0" stroke="#212121" stroke-width="12"
                                    stroke-dasharray="1 28">
                                </line> -->
                            <!-- </svg> -->
                        </div>
        
                        <span class="seperateFilter" style="margin: 15px 0 15px;"></span>


                        <!-- Filter: for admin/agent to view sold/archived listing -->
                        <% if(currentUser && currentUser.isAdmin || currentUser && currentUser.isAgent && currentUser.agentStatus){ %>
                            <!-- sold -->
                            <div class="dropdownSold">
                                <div class="dropdownSold-content" id="dropdownSold-content">
                                    <input type="checkbox" id="sold" name="soldCheck" value="sold" <% if(data.soldCheck) {%> checked <%} %>>
                                    <label for="sold">Exclude Sold Listing</label><br>
                                    <input type="checkbox" id="archive" name="archiveCheck" value="archive" <% if(data.archiveCheck) {%> checked <%} %>>
                                    <label for="archive">Exclude Archive listing</label><br>
                                </div>  
                            </div>
                        <% } %>
        
                        <span class="seperateFilter" style="margin: 15px 0 15px;"></span>

                        <div class="filter-Btn">
                            <input type="submit" value="Apply" name="Apply" id="applyFilter">
                            <input type="button" onclick="resetForm()" value="Reset" >
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="col-md-8" style="padding: 20px 0 20px 0;">
            <% listings.forEach(function(listing) { %>
                <div class="col-md-12 m-0 p-0">
                    <div class="listingHoverMain" style="display: flex; align-items: center; justify-content: center; flex-direction: column; margin: 10px; transition: 0.3s; " data-aos="fade-up" data-aos-once="true">
                        <div class="row col-md-12">
                            <% if(listing.soldStatus==true){ %>
                                <div class="col-md-12 m-0 p-0 justify-content-center d-flex">
                                    <span class="text-center" id="soldBanner-list">
                                        Sold
                                    </span>
                                </div>
                            <% } %>
                            <% if(listing.archiveStatus==true){ %>
                                <div class="col-md-12 m-0 p-0 justify-content-center d-flex">
                                    <span class="text-center" id="archiveBanner-list">
                                        Archived
                                    </span>
                                </div>
                            <% } %>
    
                            <div class="row col-md-12 m-0 d-flex justify-content-between align-items-center" style="padding: 0 0 10px 0;">
                                <div class="d-flex flex-direction-row align-items-center justify-content-center" style="font-size: 15px; cursor: pointer; " onClick=" window.location='/user/<%=listing.author.id._id %>'">
                                    <img src="<%= listing.author.id.image%>" style="width:35px; height:35px ;border-radius: 50%; margin: auto;object-fit: cover;">
                                    <div class="d-flex flex-column" style="margin-left: 10px;">
                                        <div class="d-flex flex-direction-row">
                                            <%= listing.author.id.firstName%>
                                            <%= listing.author.id.lastName%>
                                        </div>
                                        <div style="font-size: 12px;">
                                            <%= moment(listing.createdAt).fromNow()%>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="d-flex flex-direction-row">
                                    <div class="d-flex align-items-center justify-content-end">
                                        <form action="/listings/<%= listing._id %>/like" method="POST" class="likeBtn">
                                            <div>
                                                <% if (currentUser && listing.likes.some(function (like) { return like.equals(currentUser._id) })) { %>
                                                    <button class="p-0" id="filledHeart">
                                                        <i class="fas fa-heart filledHeart"></i>
                                                        <%= listing.likes.length %>
                                                    </button>
                                                <% } else { %>
                                                    <button class="p-0" id="emptyHeart">
                                                        <i class="far fa-heart emptyHeart"></i>
                                                        <%= listing.likes.length %>
                                                    </button>
                                                <% } %>
                                            </div>
                                        </form>
                                    </div>
                                        
                                    <%if(currentUser&&listing.author.id.equals(currentUser._id)||currentUser&&currentUser.isAdmin){%>
                                        <div class="dropdown">
                                            <button type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="background-color: transparent; border: none">
                                                <i class="fas fa-ellipsis-v"></i>
                                            </button>
                                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                                                <a class="dropdown-item" href="/listings/<%= listing._id %>/edit">
                                                    Edit
                                                </a>
                                                <% if(listing.archiveStatus==false && listing.soldStatus==false){ %>
                                                    <a class="dropdown-item" href="/listings/<%= listing._id %>/archive">
                                                        Archive
                                                    </a>
                                                    <a class="dropdown-item" href="/listings/<%= listing._id %>/sold">
                                                        Mark as Sold
                                                    </a>
                                                <% } else if(listing.archiveStatus==true&& listing.soldStatus==false) { %>
                                                    <a class="dropdown-item" href="/listings/<%= listing._id %>/unarchive">
                                                        Unarchive
                                                    </a>
                                                <% } else { %>
                                                    <a class="dropdown-item" href="/listings/<%= listing._id %>/unsold">
                                                        Mark as Available
                                                    </a>
                                                <% } %>
                                            </div>
                                        </div>
                                    <% } %>
                                </div>
                            </div>
    
                            <!--Left of Listing-->
                            <div class="col-sm-4 col-md-4 p-0 m-0 list-left d-flex justify-content-center align-items-center ">
                                <a class="p-0 m-0" href="/listings/<%= listing.id %>" style="text-decoration: none; color: black">
                                    <img class="img-fluid shadow" src="<%= listing.thumbnail %>" style="width: 100%; height: 130px; object-fit: cover; text-align: center">
                                </a>
                            </div>
    
                            <!--Right of Listing-->
                            <div class="col-sm-8 col-md-8 list-right" > 
                                <a href="/listings/<%= listing.id %>" style="text-decoration: none; color: black;">       
                                    <!--Name-->
                                    <div class="col-12 listing-detail d-flex justify-content-between" id="listing-name" >
                                        <% if(listing.name.length<14){ %>
                                            <%= listing.name.substring(0, 14) %>
                                        <% } else { %>
                                            <%= listing.name.substring(0, 14) + " ..." %>
                                        <% } %>
                                    </div>
                                    <!--Street-->
                                    <div class="col-12 listing-detail" id="listing-street">
                                        <% if(listing.location.length<25){ %>
                                            <%= listing.location.substring(0, 25) %>
                                        <% } else { %>
                                            <%= listing.location.substring(0, 25) + "..." %>
                                        <% } %>
                                    </div>
                                    <!--Price-->
                                    <div class="col-12 listing-detail" id="listing-price">
                                        <p style="margin-bottom: 0">S$ </p>
                                        <span><%=listing.price %></span>
                                    </div>
                                    <!--Property Details-->
                                    <div class="col-md-12 prop-detail">
                                        <div class="prop-tag">
                                            <i class="fas fa-bed"></i>
                                            <span><%=listing.bedrooms%></span>
                                        </div>
                                        <div class="prop-sep">
                                            <i class="fas fa-circle"></i>
                                        </div>
                                        <div class="prop-tag">
                                            <i class="fas fa-toilet"></i>
                                            <span><%=listing.bathrooms%></span>
                                        </div>
                                        <div class="prop-sep">
                                            <i class="fas fa-circle"></i>
                                        </div>
                                        <div class="prop-tag">
                                            <span><%=listing.size%> sqft</span>
                                        </div>
                                    </div>
                                    <!--Tags-->
                                    <div class="col-md-12 listing-tag-wrapper" style="display: flex; flex-direction: row;"> 
                                        <div class="col-md-4 p-0">
                                            <div class="listing-tag">
                                                <span>
                                                    <%= listing.district %>
                                                </span>
                                            </div>
                                        </div>
                                        <div class="col-md-4 p-0">
                                            <div class="listing-tag">
                                                <span>
                                                    <%= listing.type %>
                                                </span>
                                            </div>
                                        </div>
                                        <div class="col-md-4 p-0">
                                            <div class="listing-tag">
                                                <span>
                                                    <% if(listing.tenure.length<5){ %>
                                                        <%= listing.tenure.substring(0, 5) %>
                                                    <% } else { %>
                                                        <%= listing.tenure.substring(0, 5) + "..." %>
                                                    <% } %>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            <% }); %>
        </div>
    </div>
</div>

<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js'></script>
<script>
    if (resultSearch != null) {
      document.getElementById("search-result").innerHTML = 'Search result for "' + resultSearch + '"';
    }
    if (resultSearch == "") {
      document.getElementById("search-result").innerHTML = 'Latest Listings';
    }
  </script>
<script>
    (function () {
        var parent = document.querySelector(".price-slider");
        if (!parent) return;
        var
            rangeS = parent.querySelectorAll("input[type=range]"),
            numberS = parent.querySelectorAll("input[type=number]");
        rangeS.forEach(function (el) {
            el.oninput = function () {
                var slide1 = parseFloat(rangeS[0].value),
                    slide2 = parseFloat(rangeS[1].value);
                if (slide1 > slide2) {
                    [slide1, slide2] = [slide2, slide1];
                }
                numberS[0].value = slide1;
                numberS[1].value = slide2;
            }
        });

        numberS.forEach(function (el) {
            el.oninput = function () {
                var number1 = parseFloat(numberS[0].value),
                    number2 = parseFloat(numberS[1].value);
                if (number1 > number2) {
                    var tmp = number1;
                    numberS[0].value = number2;
                    numberS[1].value = tmp;
                }
                rangeS[0].value = number1;
                rangeS[1].value = number2;
            }
        });
    })();
</script>
<script>
    (function () {
        var parent = document.querySelector(".size-slider");
        if (!parent) return;
        var
            rangeS = parent.querySelectorAll("input[type=range]"),
            numberS = parent.querySelectorAll("input[type=number]");
        rangeS.forEach(function (el) {
            el.oninput = function () {
                var slide1 = parseFloat(rangeS[0].value),
                    slide2 = parseFloat(rangeS[1].value);
                if (slide1 > slide2) {
                    [slide1, slide2] = [slide2, slide1];
                }
                numberS[0].value = slide1;
                numberS[1].value = slide2;
            }
        });
        numberS.forEach(function (el) {
            el.oninput = function () {
                var number1 = parseFloat(numberS[0].value),
                    number2 = parseFloat(numberS[1].value);
                if (number1 > number2) {
                    var tmp = number1;
                    numberS[0].value = number2;
                    numberS[1].value = tmp;
                }
                rangeS[0].value = number1;
                rangeS[1].value = number2;
            }
        });
    })();
</script>
<script>                               
    function resetForm() {
        //document.getElementById("formFilter").resetForm()
        //property type
        document.getElementById("hdb").checked=false;
        document.getElementById("condo").checked=false;
        document.getElementById("landed").checked=false;
        //District type
        document.getElementById("north").checked=false;
        document.getElementById("south").checked=false;
        document.getElementById("east").checked=false;
        document.getElementById("west").checked=false;
        //rooms
        document.getElementById("1").checked=false;
        document.getElementById("2").checked=false;
        document.getElementById("3").checked=false;
        document.getElementById("4").checked=false;
        document.getElementById("5").checked=false;
        document.getElementById("6").checked=false;
        //sort by price
        document.getElementById("sortPrice").value="";
        //sort by date
        document.getElementById("sortDate").value="";
        //sort by popularity
        document.getElementById("sortPop").value="";
        //sold/archive
        // document.getElementById("sold").checked=false;
        // document.getElementById("notsold").checked=false;
        // document.getElementById("archive").checked=false;
        // document.getElementById("notarchive").checked=false;
        //sort by sold
        document.getElementById("sortSold").value="";
        //sort by archive
        document.getElementById("sortArchive").value="";
    }                
</script>
<script>
    // function openPType() {
    //     document.getElementById("dropdownPType-content").classList.toggle("showOptions");
    // }
    // function openDistrict() {
    //     document.getElementById("dropdownDistrict-content").classList.toggle("showOptions");
    // }
    // function openBedroom() {
    //     document.getElementById("dropdownBedroom-content").classList.toggle("showOptions");
    // }
    // function openBathroom() {
    //     document.getElementById("dropdownBathroom-content").classList.toggle("showOptions");
    // }
    // function openTenure() {
    //     document.getElementById("dropdownTenure-content").classList.toggle("showOptions");
    // }
    // function openSold() {
    //     document.getElementById("dropdownSold-content").classList.toggle("showOptions");
    // }
</script>
<script>
    $('.dropdownPType-content-onclick').click(function() {
            var $this = $(this);
            $('.hide-row-PType').slideToggle('slow', function() {
        });
    });

    $('.dropdownDistrict-content-onclick').click(function() {
            var $this = $(this);
            $('.hide-row-District').slideToggle('slow', function() {
        });
    });

    $('.dropdownBedroom-content-onclick').click(function() {
            var $this = $(this);
            $('.hide-row-Bedroom').slideToggle('slow', function() {
        });
    });

    $('.dropdownBathroom-content-onclick').click(function() {
            var $this = $(this);
            $('.hide-row-Bathroom').slideToggle('slow', function() {
        });
    });

    $('.dropdownTenure-content-onclick').click(function() {
            var $this = $(this);
            $('.hide-row-Tenure').slideToggle('slow', function() {
        });
    });
    </script>
<script>
    $(document).ready(function(){
        $(window).scroll(function(){
            //shows up when scroll over 300
            if($(window).scrollTop()>300){
            $('.my_bttn').fadeIn(250);
        }
        else{
            $('.my_bttn').fadeOut(250);
        }
        });
        //back to top
        $('.my_bttn').click(function(){
        //scroll speed(400) scroll range left(0)
        $('html,body').animate(
            {scrollTop:0},400
        );
        });
    });
  </script>
<%- include("../partials/footer") %>